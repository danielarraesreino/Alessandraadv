{% extends "base.html" %}
{% load static %}

{% block content %}
<!-- Contact Header -->
<section class="section-full section-white" style="padding-top: 8rem; padding-bottom: 4rem;">
    <div class="container-fluid animate-fade-up" style="text-align: center;">
        <span
            style="color: var(--color-salmon-dark); letter-spacing: 2px; font-size: 0.9rem; text-transform: uppercase; font-weight: 600;">Atendimento
            Especializado</span>
        <h1 style="font-size: 4rem; margin-top: 1rem; margin-bottom: 2rem;">Entre em Contato</h1>
        <div style="width: 60px; height: 4px; background: var(--color-salmon); margin: 0 auto 2rem;"></div>
        <p
            style="font-size: 1.25rem; color: var(--color-gray-dark); max-width: 800px; margin: 0 auto; line-height: 1.6;">
            Sua história merece ser ouvida. Entre em contato pelos canais oficiais ou utilize o formulário abaixo para
            uma triagem inicial inteligente.
        </p>
    </div>
</section>

<!-- Contact Info & Form -->
<section class="section-full section-creme" style="padding-bottom: 0;">
    <div class="container-fluid">
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 4rem;">
            <!-- Informações de Contato (Esquerda) -->
            <div class="animate-fade-up"
                style="background: white; padding: 3rem; border-radius: 20px; box-shadow: var(--shadow-medium); height: fit-content;">
                <h3 style="margin-bottom: 2rem;">Canais Oficiais</h3>

                <!-- Localização -->
                <div style="margin-bottom: 2rem; display: flex; gap: 1rem;">
                    <div
                        style="min-width: 40px; height: 40px; border-radius: 50%; background: var(--color-creme); display: flex; align-items: center; justify-content: center; color: var(--color-salmon-dark);">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                            <circle cx="12" cy="10" r="3"></circle>
                        </svg>
                    </div>
                    <div>
                        <h4
                            style="font-size: 0.9rem; color: var(--color-gray); text-transform: uppercase; margin-bottom: 0.25rem;">
                            Endereço</h4>
                        <p style="font-size: 1.1rem; line-height: 1.6;">
                            Av. Washington Luís, nº 1800,<br>
                            Alameda das Tangerinas, nº 378,<br>
                            Campinas, SP, CEP 13.042-901.
                        </p>
                    </div>
                </div>

                <!-- WhatsApp -->
                <div style="margin-bottom: 2rem; display: flex; gap: 1rem;">
                    <div
                        style="min-width: 40px; height: 40px; border-radius: 50%; background: var(--color-creme); display: flex; align-items: center; justify-content: center; color: var(--color-salmon-dark);">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path
                                d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.12 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z">
                            </path>
                        </svg>
                    </div>
                    <div>
                        <h4
                            style="font-size: 0.9rem; color: var(--color-gray); text-transform: uppercase; margin-bottom: 0.25rem;">
                            WhatsApp</h4>
                        <p style="font-size: 1.25rem; font-weight: 700;">
                            <a href="https://wa.me/5519988014465"
                                style="color: var(--color-salmon); text-decoration: none;">(19) 98801-4465</a>
                        </p>
                    </div>
                </div>

                <!-- Email -->
                <div style="margin-bottom: 2rem; display: flex; gap: 1rem;">
                    <div
                        style="min-width: 40px; height: 40px; border-radius: 50%; background: var(--color-creme); display: flex; align-items: center; justify-content: center; color: var(--color-salmon-dark);">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z">
                            </path>
                            <polyline points="22,6 12,13 2,6"></polyline>
                        </svg>
                    </div>
                    <div>
                        <h4
                            style="font-size: 0.9rem; color: var(--color-gray); text-transform: uppercase; margin-bottom: 0.25rem;">
                            E-mail</h4>
                        <p style="font-size: 1rem; font-weight: 600; word-break: break-all;">
                            <a href="mailto:amdonadonadvocacia@adv.oabsp.org.br"
                                style="color: var(--color-black); text-decoration: none;">amdonadonadvocacia@adv.oabsp.org.br</a>
                        </p>
                    </div>
                </div>

                <!-- LinkedIn -->
                <div style="margin-bottom: 2rem; display: flex; gap: 1rem;">
                    <div
                        style="min-width: 40px; height: 40px; border-radius: 50%; background: var(--color-creme); display: flex; align-items: center; justify-content: center; color: var(--color-salmon-dark);">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z">
                            </path>
                            <rect x="2" y="9" width="4" height="12"></rect>
                            <circle cx="4" cy="4" r="2"></circle>
                        </svg>
                    </div>
                    <div>
                        <h4
                            style="font-size: 0.9rem; color: var(--color-gray); text-transform: uppercase; margin-bottom: 0.25rem;">
                            Rede Profissional</h4>
                        <p style="font-size: 1.1rem;">
                            <a href="https://www.linkedin.com/in/alessandradonadon/" target="_blank"
                                style="color: var(--color-black); text-decoration: none; border-bottom: 1px solid var(--color-salmon);">Alessandra
                                Donadon &nearr;</a>
                        </p>
                    </div>
                </div>

                <div style="padding-top: 2rem; border-top: 1px solid var(--color-gray-light); margin-top: 2rem;">
                    <p style="font-size: 0.9rem; color: var(--color-gray);">
                        <strong>Advocacia de Impacto:</strong> Atendimento com hora marcada.
                    </p>
                </div>
            </div>

            <!-- Contact Form (Direita) - Integrado com Kanban -->
            <div class="animate-fade-up delay-100">
                <div
                    style="background: var(--color-creme); padding: 3rem; border-radius: 20px; border: 1px solid var(--border-soft);">
                    <h3 style="margin-bottom: 1rem;">Mensagem Direta</h3>
                    <p style="margin-bottom: 2rem; font-size: 0.95rem; color: var(--color-gray-dark);">
                        Preencha o formulário abaixo. Nossa Inteligência ("Guardião da Marca") fará a triagem inicial
                        para agilizar seu atendimento.
                    </p>

                    <form action="#" method="POST" id="contactForm"> <!-- TODO: Connect to backend logic -->
                        {% csrf_token %}
                        <div style="margin-bottom: 1.5rem;">
                            <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Seu Nome</label>
                            <input type="text" name="name" required
                                style="width: 100%; padding: 1rem; border: 1px solid #ddd; border-radius: 8px; font-family: 'Inter';">
                        </div>

                        <div style="margin-bottom: 1.5rem;">
                            <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Seu Contato
                                (WhatsApp/Tel)</label>
                            <input type="text" name="contact" required
                                style="width: 100%; padding: 1rem; border: 1px solid #ddd; border-radius: 8px; font-family: 'Inter';">
                        </div>

                        <div style="margin-bottom: 1.5rem;">
                            <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Do que você
                                precisa?</label>
                            <select name="subject" required
                                style="width: 100%; padding: 1rem; border: 1px solid #ddd; border-radius: 8px; font-family: 'Inter'; background: white;">
                                <option value="" disabled selected>Selecione um assunto...</option>
                                <option value="lipedema">Saúde & Lipedema (Negativas de Convênio)</option>
                                <option value="terceiro_setor">Terceiro Setor (ONGs e Captação)</option>
                                <option value="dividas">Superendividamento & Bancário</option>
                                <option value="civel">Cível Geral & Contratos</option>
                                <option value="estagio">Candidato a Estágio (Recrutamento)</option>
                                <option value="outros">Outros Assuntos</option>
                            </select>
                        </div>

                        <div style="margin-bottom: 2rem;">
                            <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Como podemos
                                ajudar?</label>
                            <textarea name="message" rows="4" required
                                style="width: 100%; padding: 1rem; border: 1px solid #ddd; border-radius: 8px; font-family: 'Inter';"></textarea>
                        </div>

                    </form>

                    <script>
                        document.getElementById('contactForm').addEventListener('submit', function (e) {
                            e.preventDefault();
                            const formData = new FormData(this);
                            const data = Object.fromEntries(formData.entries());
                            const btn = this.querySelector('button');
                            const originalText = btn.innerText;

                            btn.innerText = 'Enviando...';
                            btn.disabled = true;

                            fetch('/api/intake/submit-contact/', {
                                method: 'POST',
                                headers: {
                                    'Content-Type': 'application/json',
                                    'X-CSRFToken': '{{ csrf_token }}'
                                },
                                body: JSON.stringify(data)
                            })
                                .then(response => {
                                    if (!response.ok) throw new Error('Network response was not ok');
                                    return response.text();
                                })
                                .then(html => {
                                    // Replace form container content with success message
                                    const container = document.querySelector('.animate-fade-up.delay-100 > div');
                                    container.innerHTML = html;
                                    container.scrollIntoView({ behavior: 'smooth', block: 'center' });
                                })
                                .catch(error => {
                                    console.error('Error:', error);
                                    btn.innerText = 'Erro. Tente novamente.';
                                    btn.disabled = false;
                                    setTimeout(() => {
                                        btn.innerText = originalText;
                                        btn.disabled = false;
                                    }, 3000);
                                });
                        });
                    </script>

                    <!-- Security & Compliance Badges -->
                    <div
                        style="margin-top: 2rem; display: flex; align-items: center; justify-content: center; gap: 1.5rem; opacity: 0.7;">
                        <div style="display: flex; align-items: center; gap: 0.5rem; font-size: 0.8rem;">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                                <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                            </svg>
                            <span>Criptografia Ponta-a-Ponta</span>
                        </div>
                        <div style="display: flex; align-items: center; gap: 0.5rem; font-size: 0.8rem;">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
                            </svg>
                            <span>LGPD Compliant</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Programa de Estágio -->
<section class="section-full section-white" style="border-top: 1px solid var(--border-soft);">
    <div class="container-fluid">
        <div class="animate-fade-up" style="max-width: 900px; margin: 0 auto; text-align: center;">
            <span
                style="background: var(--color-black); color: var(--color-creme); padding: 0.5rem 1rem; border-radius: 50px; font-size: 0.8rem; font-weight: 600; letter-spacing: 1px;">CARREIRA</span>
            <h2 style="margin-top: 1.5rem; margin-bottom: 2rem;">Programa de Estágio</h2>

            <blockquote
                style="font-family: var(--font-primary); font-size: 1.4rem; line-height: 1.6; color: var(--color-gray-dark); margin-bottom: 2rem; font-style: italic;">
                "A advocacia se renova quando forma pessoas conscientes do papel social que exercem. Nosso programa de
                estágio é voltado ao desenvolvimento integral — técnico, ético e humano — de novos talentos. Mais do que
                ensinar Direito, queremos inspirar uma prática jurídica comprometida com a escuta, o senso crítico e a
                transformação da realidade à nossa volta."
            </blockquote>

            <p style="color: var(--color-gray);">
                Para se candidatar, utilize o formulário acima selecionando a opção <strong>"Candidato a
                    Estágio"</strong>.<br>
                Valorizamos trajetórias diversas e vontade genuína de aprender.
            </p>
        </div>
    </div>
</section>
{% endblock %}
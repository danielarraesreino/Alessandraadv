{% load static %}
<!DOCTYPE html>
<html lang="pt-br">

<head>
    {% include "components/head.html" %}
</head>

<body hx-headers='{"X-CSRFToken": "{{ csrf_token }}"}'>
    {% include "components/header.html" %}

    <main>
        <!-- Header Section -->
        <section class="section-full section-white"
            style="padding-top: 8rem; padding-bottom: 4rem; width: 100%; display: flex; justify-content: center;">
            <div class="container-fluid" style="text-align: center; max-width: 1200px; width: 100%; margin: 0 auto;">
                <span
                    style="color: var(--color-salmon-dark); letter-spacing: 2px; font-size: 0.9rem; text-transform: uppercase; font-weight: 600;">Insights
                    & Atualizações</span>
                <h1
                    style="font-size: 4rem; margin-top: 1rem; margin-bottom: 2rem; font-family: 'Playfair Display', serif;">
                    In Brief</h1>
                <div style="width: 60px; height: 4px; background: var(--color-salmon); margin: 0 auto 2rem;"></div>
                <p
                    style="font-size: 1.25rem; color: var(--color-gray-dark); max-width: 800px; margin: 0 auto; line-height: 1.6;">
                    Conhecimento estratégico sobre Direito, Saúde e Cultura. <br>
                    Acompanhe nossas análises sobre as transformações jurídicas que impactam sua vida.
                </p>
            </div>
        </section>

        <!-- Articles Grid -->
        <section class="section-full section-creme">
            <div class="container-fluid">
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 3rem;">
                    {% for article in articles %}
                    <article
                        style="background: white; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 20px rgba(0,0,0,0.05); transition: all 0.3s ease; display: flex; flex-direction: column;">

                        {% if article.image %}
                        <div style="height: 240px; overflow: hidden;">
                            <img src="{{ article.image.url }}" alt="{{ article.title }}"
                                style="width: 100%; height: 100%; object-fit: cover; transition: transform 0.5s ease;"
                                onmouseover="this.style.transform='scale(1.05)'"
                                onmouseout="this.style.transform='scale(1)'">
                        </div>
                        {% endif %}

                        <div style="padding: 2.5rem; flex-grow: 1; display: flex; flex-direction: column;">
                            <div
                                style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 1.5rem;">
                                <span
                                    style="background: var(--color-creme); color: var(--color-salmon-dark); padding: 0.4rem 1rem; border-radius: 50px; font-size: 0.8rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px;">
                                    {{ article.categories.first.name|default:"Artigo" }}
                                </span>
                                <span
                                    style="color: var(--color-gray); font-size: 0.85rem; font-family: 'Inter', sans-serif;">
                                    {{ article.published_at|date:"d M, Y" }}
                                </span>
                            </div>

                            <h2
                                style="font-size: 1.6rem; margin-bottom: 1.25rem; line-height: 1.3; font-family: 'Playfair Display', serif;">
                                <a href="{% url 'in_brief:article_detail' article.slug %}"
                                    style="text-decoration: none; color: var(--color-black); transition: color 0.3s;">
                                    {{ article.title }}
                                </a>
                            </h2>

                            <p
                                style="color: var(--color-gray-dark); margin-bottom: 2rem; line-height: 1.6; font-size: 1rem; flex-grow: 1;">
                                {{ article.summary }}
                            </p>

                            <a href="{% url 'in_brief:article_detail' article.slug %}"
                                style="text-decoration: none; color: var(--color-salmon); font-weight: 600; display: inline-flex; align-items: center; gap: 0.5rem; transition: gap 0.3s;"
                                onmouseover="this.querySelector('span').style.transform='translateX(5px)'"
                                onmouseout="this.querySelector('span').style.transform='translateX(0)'">
                                Ler análise completa <span style="transition: transform 0.3s;">&rarr;</span>
                            </a>
                        </div>
                    </article>
                    {% empty %}
                    <div
                        style="text-align: center; grid-column: 1 / -1; padding: 6rem 2rem; background: white; border-radius: 12px; border: 1px dashed var(--border-soft);">
                        <p style="color: var(--color-gray); font-size: 1.3rem; font-family: 'Playfair Display', serif;">
                            Aguardando novas publicações estratégicas.
                        </p>
                        <p style="color:red">Debug: Articles count: {{ articles.count }} | DebugVar: {{ debug_var }}</p>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </section>
    </main>

    {% include "components/footer.html" %}

    <a href="https://wa.me/5519988014465" class="whatsapp-float" target="_blank" aria-label="WhatsApp">
        <svg width="30" height="30" viewBox="0 0 24 24" fill="white">
            <path
                d="M12.031 2c-5.511 0-9.993 4.481-9.993 9.993 0 1.763.461 3.475 1.332 4.978L2 22l5.148-1.351c1.455.794 3.09 1.211 4.757 1.211 5.511 0 9.993-4.482 9.993-9.993 0-5.512-4.482-9.993-9.993-9.993zM12.031 20.125c-1.552 0-3.041-.399-4.343-1.156l-.31-.184-3.228.847.861-3.14-.202-.321c-.822-1.31-1.256-2.83-1.256-4.388 0-4.469 3.636-8.106 8.106-8.106 4.471 0 8.106 3.637 8.106 8.106 0 4.47-3.635 8.102-8.106 8.102zM16.711 14.505c-.258-.129-1.521-.75-1.758-.836s-.41-.129-.582.129-.668.836-.819 1.011-.301.194-.559.065-1.09-.402-2.076-1.279c-.767-.684-1.284-1.53-1.434-1.789s-.016-.399.112-.527c.116-.115.258-.301.387-.451.129-.15.172-.258.258-.43s.043-.323-.021-.452c-.065-.129-.582-1.4-.798-1.92s-.421-.43-.582-.43-.323-.016-.516-.016-.516.065-.785.344-.1.355.021.516c.121.161.258.334.387.527s.129.28.194.43.043.258-.021.43c-.065.172-1.29 5.591-1.29 5.591.065-.129.344.602.818 1.161s1.075 1.011 2.581 1.634c.258.108.516.194.774.28 2.065.667 2.387.645 2.624.516.237-.129.753-.452.861-.882s.108-.796.065-.882c-.043-.086-.151-.129-.409-.258z" />
        </svg>
    </a>

    {% include "components/scripts.html" %}
</body>

</html>